{"version":3,"sources":["App.js","index.js"],"names":["App","props","addData","setState","isScrolled","state","index","api","length","isLoaded","url","fetch","then","res","json","catch","error","items","localStorage","getItem","concat","setItem","setTimeout","onScroll","hasReachedBottom","sortByDate","console","log","newPostList","sort","a","b","views","bottomSheet","value","obj","this","window","removeEventListener","innerHeight","scrollY","document","body","offsetHeight","addEventListener","className","map","item","alt","event_name","src","thumbnail_image","event_date","likes","shares","indexOf","Component","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.56034c4c.chunk.js","sourcesContent":["import { Component } from 'react';\nimport './App.css';\nimport { Offline, Online } from \"react-detect-offline\";\n\n\nclass App extends Component{\n\n  constructor(props){\n    super(props);\n    this.state={\n      isScrolled:false,\n      index:0,\n      api:[\"http://www.mocky.io/v2/59ac28a9100000ce0bf9c236\",\"http://www.mocky.io/v2/59ac293b100000d60bf9c239\"],\n      items:[],\n      isLoaded:false,\n      bottomSheet:false,\n      value:-1\n    }\n  }\n\n  \ntoggleBottomSheet () {\n  let obj = (this.state.bottomSheet) ? { 'bottomSheet': false } : { 'bottomSheet': true }\n  this.setState(obj)\n}\n  addData=()=>{\n    this.setState({\n      isScrolled:true\n    })\n\n    if(this.state.index<this.state.api.length)\n    {\n      this.setState({\n        isLoaded:false,\n      })\n      var index=this.state.index\n      var url=this.state.api[index];\n        fetch(url).then(res=>res.json())\n        .catch(error => {this.setState\n          ({\n            items:localStorage.getItem(\"posts\")})\n          })\n      .then(json=>{\n        this.setState({\n          isLoaded:true,\n          items:this.state.items.concat(json[\"posts\"]),\n          index:index+1\n        })\n        localStorage.setItem(\"posts\", this.state.items);\n      });\n    }\n\n    setTimeout( ()=> { this.setState({\n      isScrolled:false\n    })}, 1000);\n   };\n\n  componentWillUnmount() {\n    window.removeEventListener(\"scroll\", this.onScroll, false);\n  }\n  onScroll = () => {\n    if(this.state.isScrolled===false)\n    {\n    if (this.hasReachedBottom()) {\n      this.addData();\n    }\n  }\n  };\n\n  sortByDate =()=> {\n    var items = this.state.items\n    console.log(items)\n      let newPostList = items.sort((a, b) => a.views < b.views)\n    console.log(newPostList)\n    this.setState({\n      items: newPostList\n    })\n  }\n\n  hasReachedBottom() {\n    return (\n            (window.innerHeight + window.scrollY) > document.body.offsetHeight\n    )\n  }\n  componentDidMount(){\n    fetch('http://www.mocky.io/v2/59b3f0b0100000e30b236b7e').then(res=>res.json())\n    .then(json=>{\n      this.setState({\n        isLoaded:true,\n        items:json[\"posts\"]\n      })\n        localStorage.setItem(\"posts\", this.state.items);\n    })\n   \n    window.addEventListener(\"scroll\", this.onScroll, false);\n  }\n  render(){\n    var {isLoaded,items}=this.state;\n      return (\n        <div className=\"App\">\n            <Online>\n            {!isLoaded &&\n              <h2 className=\"green\">Loading...</h2>\n            }\n            {isLoaded &&\n              <div>\n          <h2 className=\"green\">Feed Page - Online</h2>\n          {/* <button onClick={this.sortByDate}>Order by date</button> */}\n\n              <div className=\"box\">\n                {items.map(item=>(\n                        <div className=\"card\" key={items.indexOf(item)}>\n                          <img alt={item.event_name}src={item.thumbnail_image} className=\"image\"/>\n                          <div className=\"name\">{item.event_name}</div>\n                          <div className=\"date\">Date: {item.event_date}</div>\n                          <div className=\"details\"><span>{item.views} Views, {item.likes} Likes,  {item.shares} Shares</span></div>\n                        </div>\n                  ))};\n                </div></div>\n          }\n          </Online>\n          <Offline>\n            <h2 className=\"red\">Feed Page - Currently Offline</h2>\n            <div className=\"box\">\n                {items&&items.map(item=>(\n                        <div className=\"card\" key={items.indexOf(item)}>\n                          <img alt={item.event_name}src={item.thumbnail_image} className=\"image\"/>\n                          <div className=\"name\">{item.event_name}</div>\n                          <div className=\"date\">Date: {item.event_date}</div>\n                          <div className=\"details\"><span>{item.views} Views, {item.likes} Likes,  {item.shares} Shares</span></div>\n                        </div>\n                  ))};\n                </div>\n          </Offline>\n          </div>\n      );\n    }\n   \n  }  \n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}